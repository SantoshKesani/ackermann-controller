@startuml

participant Test

Test -> MockPlant: getState
activate MockPlant

MockPlant -> Test: vel_cur, head_cur
deactivate MockPlant

Test -> Controller: update(vel_cur, head_cur, vel_des, head_des)
activate Controller

Controller -> Model: toState(vel_des, head_des)
activate Model

Model -> Controller: state_des

Controller -> Model: toState(vel_cur, head_cur)
Model -> Controller: state_cur
deactivate Model

Controller -> Controller: calcError(state_cur, state_des)
Controller -> Controller: calcCommand(error)

Controller -> Limits: limit(command)
activate Limits

Limits -> Controller: command
deactivate Limits

Controller -> Test: command
deactivate Controller


@enduml
